{"version":3,"file":"static/js/551.064d98cd.chunk.js","mappings":"qLAAO,IAAMA,EAAc,SAACC,GAAD,MAA4B,qBAAVA,GAChCC,EAAa,SAACC,GAAD,OAAuC,IAA9BC,OAAOC,OAAOF,GAAKG,QAAgBH,EAAII,cAAgBH,QAEnF,SAASI,IACZ,OAAQ,CAAC,MAAQ,KAAO,KAAO,KAAO,MAAMC,QAAQ,UAAU,SAACC,GAAD,OAAQA,EAAKC,OAAOC,gBAAgB,IAAIC,WAAW,IAAI,GAAM,IAAOH,EAAI,GAAMI,SAAS,S,kNCFnJC,EAAgB,SAACC,EAAMC,GACzB,IAAMC,EAAWC,OAAOC,SAASC,cAAc,KAC/CH,EAASI,MAAQ,gBACjBJ,EAASK,SAAWN,EAEpBC,EAASM,KAAOR,EAEhBI,SAASK,KAAKC,YAAYR,GAC1BA,EAASS,QACTP,SAASK,KAAKG,YAAYV,GAE1BA,EAASW,UAGAC,EAAa,mCAAG,WAAOC,EAASC,GAAhB,0FACnBC,EAAOb,SAASc,qBAAqB,QAAQ,GAC7CT,EAAOL,SAASc,qBAAqB,QAAQ,GAC/CC,EAAYF,EAAKG,YACjBC,EAAYZ,EAAKW,aACfE,EAAWP,EAAQQ,YAAcR,EAAQK,aAChCL,EAAQK,cACnBD,GAAaG,EACbD,GAAaC,GAEjBL,EAAKX,MAAMkB,MAAQL,EAAY,KAC/BV,EAAKH,MAAMkB,MAAQH,EAAY,KAXN,UAYJI,GAAAA,CAAYV,EAAS,CAAEW,MAAO,IAZ1B,QAYnBC,EAZmB,OAanBC,EAAQD,EAAOE,UAAU,YAAa,GAC5C9B,EAAc6B,EAAOZ,GACrBC,EAAKX,MAAMkB,MAAQ,KACnBf,EAAKH,MAAMkB,MAAQ,KAhBM,4CAAH,wDAmBbM,EAAU,mCAAG,WAAOf,EAASC,GAAhB,kEACrB,iBAAC,iFACQ,UAAWe,UADnB,iEAIuBN,GAAAA,CAAYV,EAAS,CAAEW,MAAO,IAJrD,cAKSM,OAAP,mCAAc,WAAOhC,GAAP,4EACJiC,EAAQ,CAAC,IAAIC,KAAK,CAAClC,GAAOgB,EAAe,CAAEmB,KAAMnC,EAAKmC,QACtDC,EAAY,CACdH,MAAAA,IAEAF,UAAUM,SAASD,GALb,0CAOIL,UAAUO,MAAMF,GAPpB,uDASe,eAAb,KAAIG,MACJC,QAAQC,MAAM,KAAIF,KAAM,KAAIG,SAV9B,gCAcNF,QAAQG,KAAK,wBAAyBP,GAdhC,yDAAd,uDALF,0CAAD,GADqB,2CAAH,wD,aC9BjBQ,EAAiBC,EAAAA,MAAW,kBAAMC,EAAAA,EAAAA,KAAc,kBAAM,mCACtDC,EAAoBF,EAAAA,MAAW,kBAAMC,EAAAA,EAAAA,KAAc,kBAAM,oCAsB/D,EApB2B,WACvB,OAEIE,EAAAA,EAAAA,MADAC,MAASC,EADb,EACaA,cAAeC,EAD5B,EAC4BA,oBAAqBC,EADjD,EACiDA,UADjD,IAC4Dd,MAAAA,OAD5D,SAGMe,GAAYC,EAAAA,EAAAA,UACZC,GAAqBC,EAAAA,EAAAA,KAAY,SAACP,GAAD,OAAWA,EAAMQ,iBAAiBF,sBAEnEG,EAAc,CAAEL,UAAAA,EAAWH,cAAAA,EAAeC,oBAAAA,EAAqBC,UAAAA,ICPlE,SAA6BD,EAAqBb,EAAOe,GAC5D,IAAMM,GAAWC,EAAAA,EAAAA,MAEXC,GAAWL,EAAAA,EAAAA,KAAY,SAACP,GAAD,OAAWA,EAAMQ,iBAAiBI,aAE/DC,EAAAA,EAAAA,YAAU,YACNC,EAAAA,EAAAA,IAA0BF,KAC3B,CAACA,KAEJC,EAAAA,EAAAA,YAAU,YACL,iBAAC,uFACQE,EADR,UACsBb,EADtB,mBACmD3D,EAAAA,EAAAA,MADnD,aAEgByE,IAAV3B,IAAiC,IAAVA,EAF7B,gCAGYxB,EAAcuC,EAAUa,QAASF,GAH7C,uBAIYlC,EAAWuB,EAAUa,QAASF,GAJ1C,+CAMYlD,EAAcuC,EAAUa,QAASF,GAN7C,QAQEL,EAASQ,EAAAA,EAAAA,SAAAA,OARX,2CAAD,KAUF,CAACd,EAAWM,EAAUR,EAAqBb,IDX9C8B,CAAoBjB,EAAqBb,EAAOe,GAEhD,IACI,IAAMgB,EAAS,UAAMd,EAAN,QAEf,OADAe,EAAAA,KAAAA,CAAQ,KAA0DD,IAC3D,SAACzB,GAAD,kBAAoBc,GAApB,IAAiCW,UAAWA,KACrD,MAAO5B,GACL,OAAO,SAACM,GAAD,UAAuBW,O,2IEtBzBK,EAA4B,SAAC9E,GAAoC,IAA7BsF,EAA4B,uDAAhB,YACrDC,EAAOpE,SAASc,qBAAqB,QAAQ,GAC7CjC,EACAuF,EAAKC,UAAUC,IAAIH,GAEnBC,EAAKC,UAAU5D,OAAO0D,IAIjBI,EAAyB,SAACC,EAAiBC,GAAlB,OAAiCD,EAAgBE,KAAI,SAACC,GAAD,OAAUC,EAAAA,EAAAA,IAAmB,CAAEC,YAAaF,EAAK9F,MAAOiG,QAASL,OAAeM,WAE9JC,EAA6B,SAACF,GAAD,OAAa,OAAIA,GAASG,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEE,SAASC,cAAcF,EAAEC,e,qBCb9G,IAAIV,EAAM,CACT,iBAAkB,KAClB,iBAAkB,KAClB,kBAAmB,KACnB,cAAe,KACf,mBAAoB,KACpB,aAAc,KACd,iBAAkB,KAClB,sBAAuB,KACvB,iBAAkB,MAInB,SAASY,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEjB,EAAKa,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOlB,EAAIa,GAEZD,EAAeS,KAAO,WACrB,OAAO/G,OAAO+G,KAAKrB,IAEpBY,EAAeU,QAAUP,EACzBQ,EAAOC,QAAUZ,EACjBA,EAAeE,GAAK,M","sources":["common/utils/commonUtils.js","components/organisms/analysis/generate-quote-image/utils/utils.js","components/organisms/analysis/generate-quote-image/generateQuoteImage.js","components/organisms/analysis/generate-quote-image/utils/hooks.js","components/organisms/home/home-page/utils/utils.js","common/static/assets/images/philosophers|sync|/^/.*$"],"sourcesContent":["export const isUndefined = (value) => typeof value === 'undefined'\r\nexport const isObjEmpty = (obj) => Object.values(obj).length === 0 && obj.constructor === Object\r\n\r\nexport function uuidv4() {\r\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) => (c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16))\r\n}\r\n","import html2canvas from 'html2canvas'\r\n\r\nconst downloadImage = (blob, fileName) => {\r\n    const fakeLink = window.document.createElement('a')\r\n    fakeLink.style = 'display:none;'\r\n    fakeLink.download = fileName\r\n\r\n    fakeLink.href = blob\r\n\r\n    document.body.appendChild(fakeLink)\r\n    fakeLink.click()\r\n    document.body.removeChild(fakeLink)\r\n\r\n    fakeLink.remove()\r\n}\r\n\r\nexport const exportAsImage = async (element, imageFileName) => {\r\n    const html = document.getElementsByTagName('html')[0]\r\n    const body = document.getElementsByTagName('body')[0]\r\n    let htmlWidth = html.clientWidth\r\n    let bodyWidth = body.clientWidth\r\n    const newWidth = element.scrollWidth - element.clientWidth\r\n    if (newWidth > element.clientWidth) {\r\n        htmlWidth += newWidth\r\n        bodyWidth += newWidth\r\n    }\r\n    html.style.width = htmlWidth + 'px'\r\n    body.style.width = bodyWidth + 'px'\r\n    const canvas = await html2canvas(element, { scale: 3 })\r\n    const image = canvas.toDataURL('image/png', 1.0)\r\n    downloadImage(image, imageFileName)\r\n    html.style.width = null\r\n    body.style.width = null\r\n}\r\n\r\nexport const shareQuote = async (element, imageFileName) => {\r\n    ;(async () => {\r\n        if (!('share' in navigator)) {\r\n            return\r\n        }\r\n        const canvas = await html2canvas(element, { scale: 3 })\r\n        canvas.toBlob(async (blob) => {\r\n            const files = [new File([blob], imageFileName, { type: blob.type })]\r\n            const shareData = {\r\n                files,\r\n            }\r\n            if (navigator.canShare(shareData)) {\r\n                try {\r\n                    await navigator.share(shareData)\r\n                } catch (err) {\r\n                    if (err.name !== 'AbortError') {\r\n                        console.error(err.name, err.message)\r\n                    }\r\n                }\r\n            } else {\r\n                console.warn('Sharing not supported', shareData)\r\n            }\r\n        })\r\n    })()\r\n}\r\n","import React, { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { retryTenTimes } from '../../../../common/utils/apiUtils'\r\nimport { useCreateQuoteImage } from './utils/hooks'\r\nconst QuoteWithImage = React.lazy(() => retryTenTimes(() => import('../quote-with-image/quote-with-image')))\r\nconst QuoteWithoutImage = React.lazy(() => retryTenTimes(() => import('../quote-without-image/quote-without-image')))\r\n\r\nconst GenerateQuoteImage = () => {\r\n    let {\r\n        state: { quotationText, philosopherFullName, signature, share = false },\r\n    } = useLocation()\r\n    const exportRef = useRef()\r\n    const currentPhilosopher = useSelector((state) => state.philosophersData.currentPhilosopher)\r\n\r\n    const propsToSend = { exportRef, quotationText, philosopherFullName, signature }\r\n\r\n    useCreateQuoteImage(philosopherFullName, share, exportRef)\r\n\r\n    try {\r\n        const imageName = `${currentPhilosopher}.jpg`\r\n        require('../../../../common/static/assets/images/philosophers/' + imageName)\r\n        return <QuoteWithImage {...propsToSend} imageName={imageName} />\r\n    } catch (error) {\r\n        return <QuoteWithoutImage {...propsToSend} />\r\n    }\r\n}\r\n\r\nexport default GenerateQuoteImage\r\n","import { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport ROUTES from '../../../../../common/routes/routes'\r\nimport { uuidv4 } from '../../../../../common/utils/commonUtils'\r\nimport { setDarkModeClassOnHTMLTag } from '../../../home/home-page/utils/utils'\r\nimport { exportAsImage, shareQuote } from './utils'\r\n\r\nexport function useCreateQuoteImage(philosopherFullName, share, exportRef) {\r\n    const navigate = useNavigate()\r\n\r\n    const darkMode = useSelector((state) => state.philosophersData.darkMode)\r\n\r\n    useEffect(() => {\r\n        setDarkModeClassOnHTMLTag(darkMode)\r\n    }, [darkMode])\r\n\r\n    useEffect(() => {\r\n        ;(async function () {\r\n            const filename = `${philosopherFullName}-quote-${uuidv4()}.png`\r\n            if (share !== undefined && share === true) {\r\n                await exportAsImage(exportRef.current, filename)\r\n                await shareQuote(exportRef.current, filename)\r\n            } else {\r\n                await exportAsImage(exportRef.current, filename)\r\n            }\r\n            navigate(ROUTES.homepage.route)\r\n        })()\r\n    }, [exportRef, navigate, philosopherFullName, share])\r\n}\r\n","import { getPhilosopherData } from '../../../../../common/static/utils/utils'\r\n\r\nexport const setDarkModeClassOnHTMLTag = (value, className = 'darkTheme') => {\r\n    var root = document.getElementsByTagName('html')[0]\r\n    if (value) {\r\n        root.classList.add(className)\r\n    } else {\r\n        root.classList.remove(className)\r\n    }\r\n}\r\n\r\nexport const bringIntoOriginalOrder = (originalOptions, newOptions) => originalOptions.map((item) => getPhilosopherData({ philosopher: item.value, options: newOptions })).reverse()\r\n\r\nexport const bringIntoAlphabeticalOrder = (options) => [...options].sort((a, b) => a.fullName.localeCompare(b.fullName))\r\n","var map = {\n\t\"./BEAUVOIR.jpg\": 9073,\n\t\"./BUKOWSKI.jpg\": 3792,\n\t\"./CARL_JUNG.jpg\": 2063,\n\t\"./FREUD.jpg\": 7393,\n\t\"./MARK_TWAIN.jpg\": 5244,\n\t\"./OSHO.jpg\": 6530,\n\t\"./PETERSON.jpg\": 4500,\n\t\"./RICKY_GERVAIS.png\": 8101,\n\t\"./ROUSSEAU.jpg\": 6961\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2892;"],"names":["isUndefined","value","isObjEmpty","obj","Object","values","length","constructor","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","downloadImage","blob","fileName","fakeLink","window","document","createElement","style","download","href","body","appendChild","click","removeChild","remove","exportAsImage","element","imageFileName","html","getElementsByTagName","htmlWidth","clientWidth","bodyWidth","newWidth","scrollWidth","width","html2canvas","scale","canvas","image","toDataURL","shareQuote","navigator","toBlob","files","File","type","shareData","canShare","share","name","console","error","message","warn","QuoteWithImage","React","retryTenTimes","QuoteWithoutImage","useLocation","state","quotationText","philosopherFullName","signature","exportRef","useRef","currentPhilosopher","useSelector","philosophersData","propsToSend","navigate","useNavigate","darkMode","useEffect","setDarkModeClassOnHTMLTag","filename","undefined","current","ROUTES","useCreateQuoteImage","imageName","require","className","root","classList","add","bringIntoOriginalOrder","originalOptions","newOptions","map","item","getPhilosopherData","philosopher","options","reverse","bringIntoAlphabeticalOrder","sort","a","b","fullName","localeCompare","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","resolve","module","exports"],"sourceRoot":""}