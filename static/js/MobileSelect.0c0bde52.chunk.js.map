{"version":3,"file":"static/js/MobileSelect.0c0bde52.chunk.js","mappings":"qJACA,SAAgB,kBAAoB,yCAAyC,UAAY,iCAAiC,aAAe,oCAAoC,OAAS,+B,aCEtL,MAAMA,EAAiBC,EAAAA,KAAW,KAAMC,EAAAA,EAAAA,IAAc,IAAM,+BAE7C,SAASC,EAAYC,GAA6J,IAA5J,QAAEC,EAAO,mBAAEC,EAAkB,gBAAEC,EAAe,uBAAEC,EAAsB,YAAEC,EAAW,MAAEC,EAAK,kBAAEC,EAAiB,mBAAEC,EAAkB,SAAEC,EAAQ,WAAEC,GAAYV,EAC1L,MAAOW,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,KACxCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,KACtCG,EAAWC,IAAgBJ,EAAAA,EAAAA,WAAS,IAC3CK,EAAAA,EAAAA,WAAU,IAAMH,EAAcT,GAAQ,CAACA,IACvC,MAAMa,GAAaC,EAAAA,EAAAA,WAEnBF,EAAAA,EAAAA,WAAU,KACFF,GAAaf,EAAQoB,OAAS,IAC9BN,EAAc,IACdH,EAAeX,GACfgB,GAAa,KAElB,CAAChB,EAAQoB,OAAQL,IAoDpB,OACIM,EAAAA,EAAAA,KAAC1B,EAAc,CAAC2B,SAAUA,IAAMX,EAAe,IAAIY,UAC/CC,EAAAA,EAAAA,MAAA,OAAKC,UAAS,GAAAC,OAAKC,EAAOC,kBAAiB,KAAAF,OAAIlB,EAAWmB,EAAOE,UAAY,IAAKN,SAAA,EAC9EF,EAAAA,EAAAA,KAAA,SAAOS,KAAK,qBAAqBC,KAAK,OAAOC,QArDjCC,IACpB9B,IACAa,GAAa,IAmDiEkB,SAhD5DD,IAClB,MAAM5B,EAAQ4B,EAAEE,OAAO9B,MACvB,GAAc,KAAVA,EAAcM,EAAeX,OAC5B,CACD,IAAIU,EAAc,GAClB,GAAIL,EAAMe,OAAS,EAAG,CAClB,MAAMgB,EAAQ,IAAIC,OAAO,GAADX,OAAIrB,GAAK,KACjCK,EAAcV,EAAQsC,OAAOC,IAAA,IAAC,SAAEC,GAAUD,EAAA,OAAKH,EAAMK,KAAKD,IAC9D,CAEA7B,EAAeD,EACnB,CACAI,EAAcT,IAoCwFD,YAAaA,EAAaC,MAAOQ,EAAY6B,OAjCjIC,KAClB7B,EAAcT,MAiCLC,GACGe,EAAAA,EAAAA,KAAA,MAAII,UAAWE,EAAOiB,aAAarB,UAC/BF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,iBAvBO,IAAvBb,EAAYU,OACL,MAIPC,EAAAA,EAAAA,KAAA,MAAIwB,IAAK3B,EAAYO,UAAS,GAAAC,OAAKC,EAAOiB,aAAY,KAAAlB,OAAIlB,GAAYmB,EAAOE,WAAYN,SACzE,OAAXb,QAAW,IAAXA,OAAW,EAAXA,EAAaoC,IAAI,CAAAC,EAAwCC,KAAK,IAA5C,SAAER,EAAQ,MAAEnC,EAAK,SAAE4C,GAAW,GAAOF,EAAA,OACpDE,GAAYxC,EAAa,MACrBY,EAAAA,EAAAA,KAAA,MAAI6B,MAAsB,KAAfrC,GAAqBmC,GAA0B,OAAlBzC,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBa,QAAS,CAAE+B,MAAO,WAAc,CAAC,EAAGC,GAAInD,IAAuBI,EAAQ,SAAW,GAAgBA,MAAOA,EAAOgD,QAAUpB,GAjB/KqB,EAACd,EAAUnC,UACpBkD,IAAVlD,IACAM,EAAe,IACfG,EAAc0B,GACdtC,EAAgB,CAAEiC,OAAQ,CAAE9B,aAa4KiD,CAAmBd,EAAUnC,GAAOkB,SAC3NiB,GADkJnC,WAuB/K,C","sources":["webpack://quotes/./src/components/organisms/home/mobile/mobile-select/mobile-select.module.css?ae0e","components/organisms/home/mobile/mobile-select/mobile-select.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"typeAheadDropDown\":\"mobile-select_typeAheadDropDown__JJA7z\",\"darkTheme\":\"mobile-select_darkTheme__iM4xE\",\"dropDownList\":\"mobile-select_dropDownList__-Kl0K\",\"active\":\"mobile-select_active__bSwvG\"};","import React, { useEffect, useRef, useState } from 'react'\nimport { retryTenTimes } from '../../../../../common/utils/apiUtils'\nimport styles from './mobile-select.module.css'\nconst OutsideAlerter = React.lazy(() => retryTenTimes(() => import(/* webpackChunkName: \"OutsideAlerter\" */ '../../../../../common/components/outside-alerter/outside-alerter')))\n\nexport default function MobileSelect({ options, currentPhilosopher, onChangeHandler, onFocusHandlerCallback, placeholder, value, isFetchingOptions, recentPhilosophers, darkMode, markedMode }) {\n    const [suggestions, setSuggestions] = useState([])\n    const [searchText, setSearchText] = useState([])\n    const [isFocused, setIsFocused] = useState(false)\n    useEffect(() => setSearchText(value), [value])\n    const scollToRef = useRef()\n\n    useEffect(() => {\n        if (isFocused && options.length > 1) {\n            setSearchText('')\n            setSuggestions(options)\n            setIsFocused(false)\n        }\n    }, [options.length, isFocused])\n\n    const onFocusHandler = (e) => {\n        onFocusHandlerCallback()\n        setIsFocused(true)\n    }\n\n    const onTextChange = (e) => {\n        const value = e.target.value\n        if (value === '') setSuggestions(options)\n        else {\n            let suggestions = []\n            if (value.length > 0) {\n                const regex = new RegExp(`${value}`, `i`)\n                suggestions = options.filter(({ fullName }) => regex.test(fullName))\n            }\n\n            setSuggestions(suggestions)\n        }\n        setSearchText(value)\n    }\n\n    const onBlurHandler = () => {\n        setSearchText(value)\n    }\n\n    const suggestionSelected = (fullName, value) => {\n        if (value !== undefined) {\n            setSuggestions([])\n            setSearchText(fullName)\n            onChangeHandler({ target: { value } })\n        }\n    }\n\n    const renderSuggestions = () => {\n        if (suggestions.length === 0) {\n            return null\n        }\n\n        return (\n            <ul ref={scollToRef} className={`${styles.dropDownList} ${darkMode && styles.darkTheme}`}>\n                {suggestions?.map(({ fullName, value, disabled = false }, index) =>\n                    disabled && markedMode ? null : (\n                        <li style={searchText === '' && index < recentPhilosophers?.length ? { color: '#FF00FF' } : {}} id={currentPhilosopher === value ? 'active' : ''} key={value} value={value} onClick={(e) => suggestionSelected(fullName, value)}>\n                            {fullName}\n                        </li>\n                    )\n                )}\n            </ul>\n        )\n    }\n\n    return (\n        <OutsideAlerter callback={() => setSuggestions([])}>\n            <div className={`${styles.typeAheadDropDown} ${darkMode ? styles.darkTheme : ''}`}>\n                <input name=\"search-philosopher\" type=\"text\" onFocus={onFocusHandler} onChange={onTextChange} placeholder={placeholder} value={searchText} onBlur={onBlurHandler} />\n                {isFetchingOptions ? (\n                    <ul className={styles.dropDownList}>\n                        <li>Loading...</li>\n                    </ul>\n                ) : (\n                    renderSuggestions()\n                )}\n            </div>\n        </OutsideAlerter>\n    )\n}\n"],"names":["OutsideAlerter","React","retryTenTimes","MobileSelect","_ref","options","currentPhilosopher","onChangeHandler","onFocusHandlerCallback","placeholder","value","isFetchingOptions","recentPhilosophers","darkMode","markedMode","suggestions","setSuggestions","useState","searchText","setSearchText","isFocused","setIsFocused","useEffect","scollToRef","useRef","length","_jsx","callback","children","_jsxs","className","concat","styles","typeAheadDropDown","darkTheme","name","type","onFocus","e","onChange","target","regex","RegExp","filter","_ref2","fullName","test","onBlur","onBlurHandler","dropDownList","ref","map","_ref3","index","disabled","style","color","id","onClick","suggestionSelected","undefined"],"ignoreList":[],"sourceRoot":""}