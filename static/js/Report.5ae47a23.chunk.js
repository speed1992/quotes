"use strict";(self.webpackChunkquotes=self.webpackChunkquotes||[]).push([[57],{6228:(e,t,o)=>{o.d(t,{XY:()=>s,b0:()=>n,gZ:()=>r});const n=e=>"undefined"===typeof e,s=e=>0===Object.values(e).length&&e.constructor===Object;function r(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},8839:(e,t,o)=>{o.d(t,{g:()=>s});var n=o(4194);const s=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e=new Date(e);const s=new Date,r=s.getTime()-e.getTime(),a=Math.floor(r/864e5);return o&&(0,n.n)("dev")&&(null===o||void 0===o||o("inside isCacheExpired "+s),null===o||void 0===o||o("startDate "+e),null===o||void 0===o||o("endDate "+s),null===o||void 0===o||o("dateDifferenceInMilliSeconds endDate.getTime() - startDate.getTime() "+r),null===o||void 0===o||o("dateDifference In hours "+Math.floor(r/36e5%24)),null===o||void 0===o||o("dateDifferenceInDays "+a),null===o||void 0===o||o("dateDifferenceInDays >= cacheTime "+a>=t),null===o||void 0===o||o("cacheTime "+t)),a>=t}},7442:(e,t,o)=>{o.d(t,{v:()=>s});o(5043);function n(e,t){const o=localStorage.getItem(e),n=JSON.parse(o);return void 0===n||"undefined"===n||"null"===n||null===n?t:n}const s=e=>{let{index:t,currentPhilosopher:o,markedMode:s,markedQuotes:r={},setMarkedQuotes:a,currentData:l,setCurrentData:i}=e,u=JSON.parse(JSON.stringify(r)),c=[];const d="".concat(o,"-MARKED_AS_READ");c=n(d,[]),r&&void 0!==r[o]&&(c=[...c,...r[o]]),c=[...new Set(c)],t&&c.push(t),u[o]=c,a(u);const p=l.filter(((e,t)=>{let{id:o}=e;return-1===c.indexOf(o)}));i(JSON.parse(JSON.stringify(p)))}},4194:(e,t,o)=>{function n(e){let t=function(e){e=e.split("+").join(" ");for(var t,o={},n=/[?&]?([^=]+)=([^&]*)/g;t=n.exec(e);)o[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return o}(document.location.search),o=t[e]?t[e].toLowerCase():null;return!("false"!==o&&!o)}o.d(t,{n:()=>n})},3653:(e,t,o)=>{let n;o.d(t,{D:()=>n}),window.Worker?n=new Worker(new URL(o.p+o.u(480),o.b)):alert("Your browser doesn't support web workers.")},3899:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var n=o(5043),s=o(3003),r=o(1342),a=o(5630),l=o(1866);const i="table_table__awqB+",u="table_tableHeading__TogSS",c="table_tableColumn__ajfcX";var d=o(579);const p=e=>{let{tableData:t,columns:o}=e;return(0,d.jsx)("tbody",{children:t.map((e=>(0,d.jsx)("tr",{children:o.map((t=>{let{accessor:o}=t;const n=e[o]?e[o]:"\u2014\u2014";return(0,d.jsx)("td",{className:c,children:n},o)}))},e.id)))})},h=e=>{let{columns:t,handleSorting:o}=e;const[s,r]=(0,n.useState)(""),[a,l]=(0,n.useState)("asc");return(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:t.map((e=>{let{label:t,accessor:n,sortable:i}=e;const c=i?s===n&&"asc"===a?"up":s===n&&"desc"===a?"down":"default":"";return(0,d.jsx)("th",{className:"".concat(u," ").concat(c),onClick:i?()=>(e=>{const t=e===s&&"asc"===a?"desc":"asc";r(e),l(t),o(e,t)})(n):null,children:t},n)}))})})};const _=(e,t)=>{const[o,s]=(0,n.useState)([]);(0,n.useEffect)((()=>{s(function(e,t){return[...e].sort(((e,o)=>{var n,s,r;const a=t.filter((e=>e.sortbyOrder));let{accessor:l="id",sortbyOrder:i="asc"}=Object.assign({},...a);if(null===e[l])return 1;if(null===o[l])return-1;if(null===e[l]&&null===o[l])return 0;const u=null===(n=e[l])||void 0===n||null===(s=n.toString())||void 0===s?void 0:s.localeCompare(null===(r=o[l])||void 0===r?void 0:r.toString(),"en",{numeric:!0});return"asc"===i?u:-u}))}(e,t))}),[e]);return[o,(e,t)=>{if(e){const n=[...o].sort(((o,n)=>{var s,r,a;return null===o[e]?1:null===n[e]?-1:null===o[e]&&null===n[e]?0:(null===(s=o[e])||void 0===s||null===(r=s.toString())||void 0===r?void 0:r.localeCompare(null===(a=n[e])||void 0===a?void 0:a.toString(),"en",{numeric:!0}))*("asc"===t?1:-1)}));s(n)}}]},m=e=>{let{data:t,columns:o}=e;const[n,s]=_(t,o);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("table",{className:i,children:[(0,d.jsx)(h,{columns:o,handleSorting:s}),(0,d.jsx)(p,{columns:o,tableData:n})]})})},g=JSON.parse('[{"label":"Philosopher","accessor":"philosopher","sortable":true},{"label":"Read Count","accessor":"readCount","sortable":true,"sortbyOrder":"desc"},{"label":"Total Count","accessor":"totalCount","sortable":true},{"label":"% Completed","accessor":"percentageCompleted","sortable":true}]');var f=o(7308),v=o(6228),D=o(5499);const k=()=>{const[e,t]=(0,n.useState)([]),o=(0,s.wA)(),i=(0,s.d4)((e=>e.philosophersData.markedQuotes)),u=(0,s.d4)((e=>e.philosophersData.options)),c=(0,s.d4)((e=>e.philosophersData.darkMode)),p=(0,s.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.philosophersData)||void 0===t?void 0:t.originalOptions})),h=e=>o((0,a.a)(e)),_=e=>o((0,a.Xi)(e)),k=(0,s.d4)((e=>e.philosophersData.sorting));return(0,n.useEffect)((()=>{(0,r.g)({options:u,setOptions:_,originalOptions:p,setOriginalOptions:h,sorting:k})}),[]),(0,n.useEffect)((()=>{(e=>{let{markedQuotes:t,options:o,setData:n}=e;const s=[];let r=0;for(const l in t)if(t.hasOwnProperty(l)&&-1!==(0,f.bQ)(l,o)){let e=0;(0,v.b0)(t[l])||(e=t[l].length,r+=e);const n=(0,f.$)({philosopher:l,options:o}),a=null===n||void 0===n?void 0:n.length,i={id:(0,v.gZ)(),philosopher:(0,D.Yv)({currentPhilosopher:l,options:o}),readCount:e,totalCount:a||"\u2014\u2014",percentageCompleted:a?"".concat((e/a*100).toFixed(2),"%"):"\u2014\u2014"};s.push(i)}const a={philosopher:"Total Read",readCount:r,id:(0,v.gZ)()};s.push(a),n(s)})({markedQuotes:i,options:u,setData:t})}),[u.length]),(0,n.useEffect)((()=>{(0,l.lQ)(c)}),[c]),e.length>0?(0,d.jsx)(m,{data:e,columns:g}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontSize:"2rem",margin:"3rem"},children:"No records found!"}),(0,d.jsx)("div",{style:{fontSize:"2rem",margin:"3rem"},children:"Please use, marked mode feature, mark quotes as read and come back."})]})}},1342:(e,t,o)=>{o.d(t,{g:()=>g,T:()=>m});var n=o(8380),s=o(465);const r=15;var a=o(7308),l=o(1589),i=o(8839),u=o(2654),c=o(951),d=o(1866);const p=e=>{let{newOptions:t,oldOptions:o,oldOriginalOptions:n,setOptions:s,setOriginalOptions:r,sorting:l}=e;const i=[...c.Y,...t];let p=((e,t)=>{let o=JSON.parse(JSON.stringify(t));return o.forEach(((t,n)=>{const s=(0,a.bQ)(t.value,e);-1!==s&&(o[n].quotes=e[s].quotes)})),o})(o,[...i]);l===u.k?p=(0,d.Kf)(i,p):l===u.X&&(p=(0,d.XB)(p)),s([...p]),r(i)};var h=o(4194),_=o(5499);function m(e){let{philosopher:t,listRef:o,setIsFetching:n,setStart:s,setEnd:l,setSearchText:i,setCurrentPhilosopher:u,currentData:c,setCurrentData:d,options:p,setOptions:h,markedMode:m,markedQuotes:g,setMarkedQuotes:f,scrollPosition:v,setRowsRendered:D,recentPhilosophers:k,setRecentPhilosophers:O}=e;function w(){k&&O([...new Set([t,...k.slice(0,r-1)])]),u(t),(0,_.cJ)({philosopher:t,currentData:c,setCurrentData:d,options:p},{markedMode:m,markedQuotes:g,setMarkedQuotes:f}),n(!1)}s(1),l(""),i(""),n(!0),(0,a.$)({philosopher:t,options:p})?w():(0,a.rd)(t,{options:p,setOptions:h},[]).then(w)}const g=async e=>{let{options:t,setOptions:o,isLoggedIn:r,setSyncDate:a,isFetchingOptions:u,setIsFetchingOptions:c,originalOptions:d,setOriginalOptions:_,sorting:m,syncDate:g,setLogs:f}=e;if((0,h.n)("dev")){const e=new Date;null===f||void 0===f||f("inside onFocusHandler"),null===f||void 0===f||f("isCacheExpired(syncDate, CACHE_IN_DAYS.ASSET_GRAPH, setLogs) || options.length === 1 "+(0,i.g)(g,s.K,f)||0),null===f||void 0===f||f("options.length "+t.length),null===f||void 0===f||f("current time "+e),null===f||void 0===f||f("syncDate "+new Date(g))}if((0,i.g)(g,s.K,f)||1===t.length){null===c||void 0===c||c(!0);let e=await(0,l.Uw)((()=>fetch(n.S.STATIC_DATA.STATIC_ASSET_GRAPH)));e=await e.json(),(0,h.n)("dev")&&(null===f||void 0===f||f("api response "+e)),p({newOptions:e,oldOptions:t,oldOriginalOptions:d,setOptions:o,setOriginalOptions:_,sorting:m}),null===c||void 0===c||c(!1),null===a||void 0===a||a(Date.now())}}},2654:(e,t,o)=>{o.d(t,{X:()=>s,k:()=>n});const n="latest",s="alphabetical"},1866:(e,t,o)=>{o.d(t,{Kf:()=>l,XB:()=>i,lQ:()=>a,xm:()=>u,z8:()=>c});var n=o(7308),s=o(7052),r=o(5499);const a=e=>{let t=document.getElementsByTagName("html")[0];t.className="",e?t.classList.add("darkTheme"):t.classList.add("lightTheme")},l=(e,t)=>e.map((e=>(0,n.iL)({philosopher:e.value,options:t}))).reverse(),i=e=>[...e].sort(((e,t)=>e.fullName.localeCompare(t.fullName)));async function u(e,t,o,n,r,a){const l=await(0,s.kr)({userName:e});if(l){if(l>a){let{markedQuotesFromServer:t}=await(0,s.sE)({userName:e,openSnackbar:o});n(t),o("Auto-Sync : Restored all marked quotes!",4e3)}else a>l&&await(0,s.G9)({userName:e,markedQuotes:t,openSnackbar:o});r(Date.now())}}const c=e=>{let{currentPhilosopher:t,options:o,markedQuotes:s,setStart:a,setEnd:l}=e;const i=(0,n.$)({philosopher:t,options:o}),u=(null===s||void 0===s?void 0:s[t])||[],c=i.filter((e=>!u.includes(e.id))).reduce(((e,t)=>{let{quote:o}=t;return""!==o?Math.min((0,r.sQ)(o),e):e}),1/0);c!==1/0&&(a(1),l(c))}},7052:(e,t,o)=>{o.d(t,{G9:()=>r,fk:()=>i,kr:()=>l,sE:()=>a});var n=o(8380),s=o(1589);const r=async e=>{let{userName:t,markedQuotes:o,openSnackbar:r,setSyncDate:a}=e;await(0,s.Uw)((async()=>await fetch(n.S.MARKED_QUOTES.BACKUP,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:t,markedQuotes:o,dateSynced:Date.now()})})))},a=async e=>{var t;let{userName:o,openSnackbar:r}=e,a=await(0,s.Uw)((async()=>await fetch(n.S.MARKED_QUOTES.RESTORE,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:o})})));if(a=await a.json(),null!==(t=a)&&void 0!==t&&t.ok)try{var l,i,u;const e=null===(l=a)||void 0===l||null===(i=l.results)||void 0===i||null===(u=i[0])||void 0===u?void 0:u.markedQuotes,t=Object.values(e).flat().length;var c,d,p;if(e&&t>0)return{markedQuotesFromServer:e,dateFromServer:null===(c=a)||void 0===c||null===(d=c.results)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.dateSynced}}catch(h){r(JSON.stringify(h))}else r(JSON.stringify(a.error))},l=async e=>{var t;let{userName:o}=e,r=await(0,s.Uw)((async()=>await fetch(n.S.MARKED_QUOTES.GET_COUNT,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:o})})));var a;return r=await r.json(),null!==(t=r)&&void 0!==t&&t.ok?null===(a=r)||void 0===a?void 0:a.count:null},i=async e=>{var t;let{apiCallType:o,userName:r,password:a,setIsLoggedIn:l,openSnackbar:i,setIsFetching:u}=e;const c=r.charAt(0).toUpperCase()+r.slice(1);let d;u(!0),d="login"===o?await(0,s.Uw)((async()=>await fetch(n.S.USER.LOGIN,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:r,password:a})}))):await(0,s.Uw)((async()=>await fetch(n.S.USER.CREATE,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:r,password:a})}))),d=await d.json(),u(!1),null!==(t=d)&&void 0!==t&&t.ok?(l(!0),i(c+" "+JSON.stringify(d.serverResponse))):i(JSON.stringify(d.error))}},5499:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ke:()=>searchByWordLength,Yv:()=>getPhilosopherFullName,cJ:()=>changeQuotesData,sQ:()=>getWordCount,tq:()=>getPhilosopherFullName_i10n});var _common_utils_commonUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6228),_common_utils_staticDataUtils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7442),_common_web_workers_worker__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3653);const changeQuotesData=(e,t)=>{let{currentPhilosopher:o,currentData:n,setCurrentData:s,options:r}=e,{markedMode:a=null,markedQuotes:l,setMarkedQuotes:i}=t;n&&s(n),void 0!==a&&a&&(0,_common_utils_staticDataUtils__WEBPACK_IMPORTED_MODULE_0__.v)({currentPhilosopher:o,markedMode:a,markedQuotes:l,setMarkedQuotes:i,currentData:n,setCurrentData:s})},getPhilosopherFullName=e=>{let{currentPhilosopher:t,options:o}=e;const n=o.filter((e=>{let{value:o}=e;return t===o}));if(!(0,_common_utils_commonUtils__WEBPACK_IMPORTED_MODULE_2__.XY)(n))return n&&n[0].fullName},getPhilosopherFullName_i10n=e=>{let{currentPhilosopher:t,options:o}=e;const n=o.filter((e=>{let{value:o}=e;return t===o}));if(!(0,_common_utils_commonUtils__WEBPACK_IMPORTED_MODULE_2__.XY)(n))return n&&n[0].fullNameInOtherLanguages},searchByWordLength=async(start,end,quotes,_ref7,_ref8)=>{let{markedMode:markedMode,markedQuotes:markedQuotes,setMarkedQuotes:setMarkedQuotes}=_ref7,{setCurrentData:setCurrentData,currentPhilosopher:currentPhilosopher}=_ref8;return new Promise((resolve=>{void 0!==quotes&&("string"===typeof start&&""===start.trim()&&(start=0),_common_web_workers_worker__WEBPACK_IMPORTED_MODULE_1__.D.postMessage({quotes:quotes,end:end,start:start,filterName:"wordCountFilter"}),_common_web_workers_worker__WEBPACK_IMPORTED_MODULE_1__.D.onmessage=event=>{const newData=JSON.parse(eval("(".concat(JSON.stringify(event.data),")")));changeQuotesData({currentData:newData,setCurrentData:setCurrentData,currentPhilosopher:currentPhilosopher},{markedMode:markedMode,markedQuotes:markedQuotes,setMarkedQuotes:setMarkedQuotes}),resolve()})}))};function getWordCount(e){return e.split(" ").filter((function(e){return""!==e})).length}},465:e=>{e.exports={K:1e3,r:1}}}]);
//# sourceMappingURL=Report.5ae47a23.chunk.js.map