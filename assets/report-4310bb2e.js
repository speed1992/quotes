import{u,h as m,p,g as O,a as h,s as C,b as S}from"./index-1187b2d2.js";import{g as D,o as y}from"./utils-31b2be82.js";import{g as T,i as _,u as f,s as H}from"./commonUtils-cbff094c.js";import{u as k}from"./useDispatch-078ca31e.js";import"./worker-c74eba45.js";const N="_table_e1t6a_1",P="_tableHeading_e1t6a_11",j="_tableColumn_e1t6a_25",g={table:N,tableHeading:P,tableColumn:j},x=({tableData:t,columns:l})=>u("tbody",{children:t.map(n=>u("tr",{children:l.map(({accessor:e})=>{const s=n[e]?n[e]:"——";return u("td",{className:g.tableColumn,children:s},e)})},n.id))}),R=({columns:t,handleSorting:l})=>{const[n,e]=m(""),[s,i]=m("asc"),r=c=>{const o=c===n&&s==="asc"?"desc":"asc";e(c),i(o),l(c,o)};return u("thead",{children:u("tr",{children:t.map(({label:c,accessor:o,sortable:d})=>{const a=d?n===o&&s==="asc"?"up":n===o&&s==="desc"?"down":"default":"";return u("th",{className:`${g.tableHeading} ${a}`,onClick:d?()=>r(o):null,children:c},o)})})})};function v(t,l){return[...t].sort((e,s)=>{const i=l.filter(d=>d.sortbyOrder);let{accessor:r="id",sortbyOrder:c="asc"}=Object.assign({},...i);if(e[r]===null)return 1;if(s[r]===null)return-1;if(e[r]===null&&s[r]===null)return 0;const o=e[r].toString().localeCompare(s[r].toString(),"en",{numeric:!0});return c==="asc"?o:-o})}const M=(t,l)=>{const[n,e]=m([]);return p(()=>{e(v(t,l))},[t]),[n,(i,r)=>{if(i){const c=[...n].sort((o,d)=>o[i]===null?1:d[i]===null?-1:o[i]===null&&d[i]===null?0:o[i].toString().localeCompare(d[i].toString(),"en",{numeric:!0})*(r==="asc"?1:-1));e(c)}}]},w=({data:t,columns:l})=>{const[n,e]=M(t,l);return u(O,{children:u("table",{className:g.table,children:[u(R,{columns:l,handleSorting:e}),u(x,{columns:l,tableData:n})]})})},z=[{label:"Philosopher",accessor:"philosopher",sortable:!0},{label:"Read Count",accessor:"readCount",sortable:!0,sortbyOrder:"desc"}],I=({markedQuotes:t,options:l,setData:n})=>{const e=[];let s=0;for(const r in t)if(t.hasOwnProperty(r)&&T(r,l)!==-1){let c=0;_(t[r])||(c=t[r].length,s+=c);const o={philosopher:D({currentPhilosopher:r,options:l}),readCount:c,id:f()};e.push(o)}const i={philosopher:"Total Read",readCount:s,id:f()};e.push(i),n(e)},A=()=>{const[t,l]=m([]),n=k(),e=h(a=>a.philosophersData.markedQuotes),s=h(a=>a.philosophersData.options),i=h(a=>a.philosophersData.darkMode),r=h(a=>{var b;return(b=a==null?void 0:a.philosophersData)==null?void 0:b.originalOptions}),c=a=>n(C(a)),o=a=>n(S(a)),d=h(a=>a.philosophersData.sorting);return p(()=>{y({options:s,setOptions:o,originalOptions:r,setOriginalOptions:c,sorting:d})},[]),p(()=>{I({markedQuotes:e,options:s,setData:l})},[s.length]),p(()=>{H(i)},[i]),t.length>0?u(w,{data:t,columns:z}):u(O,{children:[u("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",fontSize:"2rem",margin:"3rem"},children:"No records found!"}),u("div",{style:{fontSize:"2rem",margin:"3rem"},children:"Please use, marked mode feature, mark quotes as read and come back."})]})};export{A as default};
